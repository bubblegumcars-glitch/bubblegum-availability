<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Bubblegum Cars â€“ Availability</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    .car { margin-bottom: 12px; }
    .unavailable { color: red; font-weight: bold; }
    input[type="date"] { margin-right: 8px; }
  </style>
</head>
<body>
  <h1>Check Car Availability</h1>

  <label>
    From: <input id="from" type="date">
  </label>
  <label>
    To: <input id="to" type="date">
  </label>
  <button onclick="checkAvailability()">Check availability</button>

  <h2>Cars:</h2>
  <ul id="carList"></ul>

  <script>
    async function checkAvailability() {
      const from = document.getElementById('from').value;
      const to = document.getElementById('to').value;

      // Fetch from our API handler
      const params = new URLSearchParams();
      if (from) params.append('from', new Date(from).toISOString());
      if (to)   params.append('to',   new Date(to).toISOString());

      const res = await fetch('/api/availability?' + params.toString());
      const data = await res.json();

      const ul = document.getElementById('carList');
      ul.innerHTML = ''; // Clear previous results
      data.cars.forEach((car) => {
        const li = document.createElement('li');
        li.className = 'car';
        const unavailable = car.unavailable.length > 0;
        li.innerHTML = `${car.name} ${unavailable ? '<span class="unavailable">(Unavailable)</span>' : ''}`;
        ul.appendChild(li);
      });
    }
  </script>
</body>
</html>
